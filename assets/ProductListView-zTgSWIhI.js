import{_ as b,o as l,c as n,a as t,t as o,d as m,F as P,r as f,e as k,f as v,g as y}from"./index--Bgr-scv.js";import{S as u}from"./sweetalert2.all-1npp_WR5.js";const $={props:["curProduct"]},x={class:"modal fade",id:"adminProduct","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},C={class:"modal-dialog modal-dialog-centered"},B={class:"modal-content"},V={class:"modal-header"},T={class:"modal-title fs-5",id:"staticBackdropLabel"},w=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),E={class:"modal-body"},L=["src","alt"],S={class:"row g-3"},A=["src","alt"],I=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1);function U(s,a,e,d,i,_){return l(),n("div",x,[t("div",C,[t("div",B,[t("div",V,[t("h1",T,o(e.curProduct.title),1),w]),t("div",E,[t("img",{src:e.curProduct.imageUrl,class:"card-img-top mb-3",alt:e.curProduct.title},null,8,L),t("p",null,"產品類別: "+o(e.curProduct.category),1),t("p",null,"產品描述: "+o(e.curProduct.description),1),t("p",null,[m(" 售價: "),t("del",null,o(e.curProduct.origin_price),1),m(" "+o(e.curProduct.price)+" / "+o(e.curProduct.unit),1)]),t("div",S,[(l(!0),n(P,null,f(e.curProduct.imagesUrl,r=>(l(),n("div",{class:"col-4",key:r},[t("img",{src:r,class:"img-fluid object-fit-cover",alt:r},null,8,A)]))),128))])]),I])])])}const D=b($,[["render",U]]);var M={VITE_API:"https://ec-course-api.hexschool.io/",VITE_PATH:"eerovuelive",BASE_URL:"/HexSchool-2023Vue-Week2/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const H={title:"是否要刪除產品",icon:"warning",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消",reverseButtons:!0},{VITE_API:h,VITE_PATH:p}=M,N={data(){return{productsList:[],curProduct:{}}},methods:{postCheckUser(){var a;const s=(a=document.cookie.split("; ").find(e=>e.startsWith("week2homework")))==null?void 0:a.split("=")[1];k.defaults.headers.common.Authorization=s,this.$http.post(`${h}v2/api/user/check`,null).then(()=>{this.getProducts()}).catch(()=>{this.$router.push("/")})},getProducts(){this.$http.get(`${h}v2/api/${p}/admin/products/all`).then(s=>{this.productsList=s.data.products}).catch(s=>{console.log(s)})},deleteProduct(s){u.fire(H).then(a=>{a.isConfirmed&&this.$http.delete(`${h}v2/api/${p}/admin/product/${s}`).then(e=>{const{message:d}=e.data;this.getProducts(),u.fire({title:d,icon:"success"})}).catch(e=>{const{message:d}=e.response.data;u.fire({title:d,icon:"error"})})})}},mounted(){this.postCheckUser()},components:{ProductModal:D}},R={class:"container mt-5"},F=t("h2",null,"產品列表",-1),O={class:"table table-bordered text-center align-middle"},W=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col"},"產品類別"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用"),t("th",{scope:"col"},"查看細節"),t("th",{scope:"col"},"刪除")])],-1),j={key:0,class:"text-primary"},z={key:1,class:"text-danger"},q=["onClick"],G=["onClick"];function J(s,a,e,d,i,_){const r=v("ProductModal");return l(),n("div",R,[F,t("table",O,[W,t("tbody",null,[(l(!0),n(P,null,f(i.productsList,c=>(l(),n("tr",{key:c.id},[t("th",null,o(c.title),1),t("td",null,o(c.category),1),t("td",null,o(c.origin_price),1),t("td",null,o(c.price),1),t("td",null,[c.is_enabled?(l(),n("span",j,"啟用")):(l(),n("span",z,"未啟用"))]),t("td",null,[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#adminProduct",onClick:g=>i.curProduct=c}," 查看詳情 ",8,q)]),t("td",null,[t("button",{type:"button",class:"btn btn-danger",onClick:g=>_.deleteProduct(c.id)}," 刪除 ",8,G)])]))),128))])]),y(r,{curProduct:i.curProduct},null,8,["curProduct"])])}const X=b(N,[["render",J]]);export{X as default};
